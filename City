import java.util.HashMap;
import java.util.Map;

public class City {
    private String name; // Название города
    private Map<City, Integer> roads;  // Хранение дорог между городами

    // Конструктор
    public City(String name) {
        this.name = name;
        this.roads = new HashMap<>();
    }

    // Геттер для названия
    public String getName() {
        return name;
    }

    // Сеттер для названия
    public void setName(String name) {
        this.name = name;
    }

    // Геттер для дорог
    public Map<City, Integer> getRoads() {
        return roads;
    }

    // Сеттер для дорог
    public void setRoads(Map<City, Integer> roads) {
        this.roads = roads;
    }

    // Метод для добавления дороги между двумя городами
    public void addRoad(City city, int distance) {
        if (roads.containsKey(city)) {
            System.out.println("Между городами уже существует дорога.");
        } else {
            roads.put(city, distance);
            city.addRoad(this, distance);  // Дорога двусторонняя
            System.out.println("Дорога добавлена между городами " + this.name + " и " + city.name);
        }
    }

    // Метод для удаления дороги между городами
    public void removeRoad(City city) {
        if (roads.containsKey(city)) {
            roads.remove(city);
            city.removeRoad(this);  // Удаляем дорогу и в обратную сторону
            System.out.println("Дорога между городами " + this.name + " и " + city.name + " удалена.");
        } else {
            System.out.println("Дорога между городами не существует.");
        }
    }

    // Метод для вывода информации о дорогах города
    @Override
    public String toString() {
        String result = name;
        if (!roads.isEmpty()) {
            result += " -> ";
            boolean first = true;
            for (Map.Entry<City, Integer> road : roads.entrySet()) {
                if (!first) result += ", ";
                result += road.getKey().name + ":" + road.getValue();
                first = false;
            }
        }
        return result;
    }
}
